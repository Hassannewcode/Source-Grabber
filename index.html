<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeMaster Pro | Advanced Source Viewer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0d1117;
            --secondary: #161b22;
            --accent: #238636;
            --accent-hover: #2ea043;
            --text: #c9d1d9;
            --text-secondary: #8b949e;
            --border: #30363d;
            --error: #f85149;
            --warning: #d29922;
            --success: #3fb950;
            --card: #0d1117;
            --input-bg: #010409;
            --scrollbar: #30363d;
            --scrollbar-thumb: #484f58;
            --highlight-js: #f1e05a;
            --highlight-css: #563d7c;
            --highlight-html: #e34c26;
            --highlight-json: #f5de19;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--primary);
            color: var(--text);
            line-height: 1.6;
            padding: 1rem;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(35,134,54,0.1) 0%, transparent 55%),
                radial-gradient(circle at 75% 75%, rgba(35,134,54,0.1) 0%, transparent 55%);
            position: relative;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 2rem 0;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, #2ea043 0%, #3fb950 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(35, 134, 54, 0.3);
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 12px 30px rgba(1, 4, 9, 0.6);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(1, 4, 9, 0.7);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
            color: var(--text);
        }
        
        .card-title i {
            color: var(--accent);
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text);
            font-size: 1.1rem;
        }
        
        .input-with-button {
            display: flex;
            gap: 0.5rem;
        }
        
        #urlInput {
            flex: 1;
            padding: 1rem 1.2rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--input-bg);
            color: var(--text);
            font-size: 1.1rem;
            outline: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        #urlInput:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(35, 134, 54, 0.3);
        }
        
        #urlInput::placeholder {
            color: var(--text-secondary);
        }
        
        .button-group {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        .btn {
            padding: 1rem 1.8rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.7rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-3px);
            box-shadow: 0 7px 10px rgba(35, 134, 54, 0.3);
        }
        
        .btn-secondary {
            background: #21262d;
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            background: #30363d;
            border-color: #8b949e;
            transform: translateY(-3px);
        }
        
        .btn-small {
            padding: 0.7rem 1.2rem;
            font-size: 1rem;
        }
        
        .options-group {
            display: flex;
            gap: 1.5rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }
        
        .option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255,255,255,0.05);
            padding: 0.7rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .option:hover {
            background: rgba(35,134,54,0.1);
        }
        
        .option input {
            width: 20px;
            height: 20px;
            accent-color: var(--accent);
        }
        
        .option label {
            margin-bottom: 0;
            font-size: 1rem;
        }
        
        .disclaimer {
            background: rgba(248, 81, 73, 0.1);
            border: 1px solid rgba(248, 81, 73, 0.4);
            border-radius: 8px;
            padding: 1.2rem;
            margin: 1.5rem 0;
            font-size: 0.95rem;
        }
        
        .disclaimer-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--error);
            margin-bottom: 0.7rem;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .output-container {
            margin-top: 1.5rem;
        }
        
        #outputHeader {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        #output {
            background: #010409;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            min-height: 400px;
            max-height: 60vh;
            overflow: auto;
            white-space: pre-wrap;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 1rem;
            line-height: 1.7;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }
        
        #output::-webkit-scrollbar {
            width: 12px;
        }
        
        #output::-webkit-scrollbar-track {
            background: var(--scrollbar);
            border-radius: 0 8px 8px 0;
        }
        
        #output::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb);
            border-radius: 8px;
            border: 2px solid var(--scrollbar);
        }
        
        .output-placeholder {
            color: var(--text-secondary);
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
        }
        
        .spinner {
            display: none;
            width: 28px;
            height: 28px;
            border: 4px solid rgba(35, 134, 54, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error {
            color: var(--error);
            background: rgba(248, 81, 73, 0.1);
            padding: 1.2rem;
            border-radius: 8px;
            border-left: 4px solid var(--error);
            margin-top: 1rem;
        }
        
        .success {
            color: var(--success);
            background: rgba(63, 185, 80, 0.1);
            padding: 1.2rem;
            border-radius: 8px;
            border-left: 4px solid var(--success);
            margin-top: 1rem;
        }
        
        .file-info {
            background: rgba(88, 166, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid #58a6ff;
            font-size: 0.95rem;
            flex: 1;
        }
        
        .file-info span {
            font-weight: 500;
            color: #58a6ff;
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            color: var(--text-secondary);
            font-size: 0.95rem;
            border-top: 1px solid var(--border);
            margin-top: 1.5rem;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .feature {
            background: var(--secondary);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--border);
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .feature:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .feature i {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 1.5rem;
            background: rgba(35,134,54,0.1);
            width: 80px;
            height: 80px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .feature h3 {
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }
        
        .feature p {
            color: var(--text-secondary);
        }
        
        .file-structure {
            background: var(--secondary);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
            max-height: 300px;
            overflow-y: auto;
        }
        
        .file-item {
            padding: 0.7rem 1rem;
            border-radius: 6px;
            margin-bottom: 0.5rem;
            background: rgba(255,255,255,0.03);
            display: flex;
            align-items: center;
            gap: 0.7rem;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .file-item:hover {
            background: rgba(35,134,54,0.1);
        }
        
        .file-item i {
            color: var(--text-secondary);
        }
        
        .file-item.js i {
            color: var(--highlight-js);
        }
        
        .file-item.css i {
            color: var(--highlight-css);
        }
        
        .file-item.html i {
            color: var(--highlight-html);
        }
        
        .file-item.json i {
            color: var(--highlight-json);
        }
        
        .progress-container {
            background: var(--secondary);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }
        
        .progress-bar {
            height: 12px;
            background: var(--input-bg);
            border-radius: 6px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        
        .progress {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }
        
        .progress-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .github-option {
            display: flex;
            align-items: center;
            gap: 0.7rem;
            margin: 1rem 0;
        }
        
        .github-option label {
            margin-bottom: 0;
        }
        
        .github-option input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--input-bg);
            color: var(--text);
        }
        
        .highlight {
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .highlight.js {
            background: rgba(241, 224, 90, 0.15);
            color: var(--highlight-js);
        }
        
        .highlight.css {
            background: rgba(86, 61, 124, 0.15);
            color: var(--highlight-css);
        }
        
        .highlight.html {
            background: rgba(227, 76, 38, 0.15);
            color: var(--highlight-html);
        }
        
        .highlight.json {
            background: rgba(245, 222, 25, 0.15);
            color: var(--highlight-json);
        }
        
        .badge {
            display: inline-block;
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }
        
        .badge-success {
            background: rgba(63, 185, 80, 0.15);
            color: var(--success);
        }
        
        .badge-warning {
            background: rgba(210, 153, 34, 0.15);
            color: var(--warning);
        }
        
        .deobfuscation-panel {
            background: var(--secondary);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid var(--border);
        }
        
        .deobfuscation-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            color: var(--text);
        }
        
        .deobfuscation-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .option-group {
            background: rgba(255,255,255,0.03);
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }
        
        .option-group h4 {
            margin-bottom: 0.8rem;
            color: var(--accent);
        }
        
        .option-item {
            display: flex;
            align-items: center;
            gap: 0.7rem;
            margin-bottom: 0.7rem;
        }
        
        .option-item:last-child {
            margin-bottom: 0;
        }
        
        .option-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }
        
        .option-item input[type="text"] {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--input-bg);
            color: var(--text);
        }
        
        .presets {
            display: flex;
            gap: 0.7rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        
        .preset-btn {
            padding: 0.6rem 1rem;
            background: rgba(35,134,54,0.1);
            border: 1px solid var(--accent);
            border-radius: 6px;
            color: var(--accent);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .preset-btn:hover {
            background: rgba(35,134,54,0.3);
        }
        
        .source-options {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .source-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .file-navigation {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            justify-content: center;
        }
        
        .file-count {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0 1rem;
            color: var(--text-secondary);
        }
        
        .config-group {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .config-item {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 200px;
        }
        
        .config-item label {
            margin-bottom: 0.5rem;
        }
        
        .config-item input {
            padding: 0.8rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--input-bg);
            color: var(--text);
        }
        
        .export-options {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .export-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            background: rgba(35,134,54,0.1);
            cursor: pointer;
        }
        
        .export-option.active {
            background: var(--accent);
            color: white;
        }
        
        .export-option input {
            display: none;
        }
        
        @media (max-width: 768px) {
            .input-with-button {
                flex-direction: column;
            }
            
            .button-group {
                width: 100%;
            }
            
            .btn {
                flex: 1;
                text-align: center;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .github-option {
                flex-direction: column;
            }
            
            .deobfuscation-options {
                grid-template-columns: 1fr;
            }
            
            .source-options {
                flex-direction: column;
            }
            
            .config-group {
                flex-direction: column;
            }
            
            .export-options {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-code"></i> CodeMaster Pro</h1>
            <p class="subtitle">Advanced source code viewer with multi-file support</p>
        </header>
        
        <div class="features">
            <div class="feature">
                <i class="fas fa-lock"></i>
                <h3>Secure & Ethical</h3>
                <p>Respects CORS policies and copyright laws. No unauthorized content access.</p>
            </div>
            <div class="feature">
                <i class="fas fa-folder-tree"></i>
                <h3>Enhanced Limits</h3>
                <p>Process up to 256 files and 30 folders from GitHub repositories.</p>
            </div>
            <div class="feature">
                <i class="fas fa-file-export"></i>
                <h3>Export Capabilities</h3>
                <p>Compile everything into a single downloadable HTML file.</p>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">
                <i class="fas fa-globe"></i>
                <h2>Source Explorer</h2>
            </div>
            
            <div class="input-group">
                <label for="urlInput">Enter Website URL or GitHub Repository:</label>
                <div class="input-with-button">
                    <input type="text" id="urlInput" placeholder="https://example.com or https://github.com/user/repo">
                    <button id="fetchBtn" class="btn btn-primary">
                        <span>Explore Source</span>
                        <div class="spinner" id="spinner"></div>
                    </button>
                </div>
            </div>
            
            <div class="config-group">
                <div class="config-item">
                    <label for="maxFiles">Max Files to Process (1-256)</label>
                    <input type="number" id="maxFiles" min="1" max="256" value="256">
                </div>
                <div class="config-item">
                    <label for="maxFolders">Max Folder Depth (1-30)</label>
                    <input type="number" id="maxFolders" min="1" max="30" value="15">
                </div>
            </div>
            
            <div class="github-option" id="githubOptions" style="display: none;">
                <div style="flex: 1;">
                    <label for="branchInput">GitHub Branch:</label>
                    <input type="text" id="branchInput" placeholder="main (default)" value="main">
                </div>
            </div>
            
            <div class="source-options">
                <div class="source-option">
                    <input type="checkbox" id="grabSourceCode" checked>
                    <label for="grabSourceCode">Grab source code</label>
                </div>
                <div class="source-option">
                    <input type="checkbox" id="grabResources" checked>
                    <label for="grabResources">Grab resources (CSS, JS, images)</label>
                </div>
            </div>
            
            <div class="progress-container" id="progressContainer" style="display: none;">
                <div class="progress-text">Processing files: <span id="progressText">0/0</span></div>
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>
            </div>
            
            <div class="file-structure" id="fileStructure" style="display: none;">
                <h3>Repository Structure</h3>
                <div id="fileList"></div>
            </div>
            
            <div class="deobfuscation-panel">
                <div class="deobfuscation-title">
                    <i class="fas fa-cogs"></i>
                    <h3>Deobfuscation Settings</h3>
                </div>
                
                <div class="deobfuscation-options">
                    <div class="option-group">
                        <h4><i class="fas fa-layer-group"></i> Arrays</h4>
                        <div class="option-item">
                            <input type="checkbox" id="unpackArrays" checked>
                            <label for="unpackArrays">Unpack Arrays</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="removeUnpackedArrays" checked>
                            <label for="removeUnpackedArrays">Remove Unpacked Arrays</label>
                        </div>
                    </div>
                    
                    <div class="option-group">
                        <h4><i class="fas fa-code-branch"></i> Proxy Functions</h4>
                        <div class="option-item">
                            <input type="checkbox" id="replaceProxyFunctions" checked>
                            <label for="replaceProxyFunctions">Replace Proxy Functions</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="removeProxyFunctions" checked>
                            <label for="removeProxyFunctions">Remove Proxy Functions</label>
                        </div>
                    </div>
                    
                    <div class="option-group">
                        <h4><i class="fas fa-project-diagram"></i> Expressions</h4>
                        <div class="option-item">
                            <input type="checkbox" id="simplifyExpressions" checked>
                            <label for="simplifyExpressions">Simplify Expressions</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="removeDeadBranches" checked>
                            <label for="removeDeadBranches">Remove Dead Branches</label>
                        </div>
                    </div>
                    
                    <div class="option-group">
                        <h4><i class="fas fa-file-alt"></i> Miscellaneous</h4>
                        <div class="option-item">
                            <input type="checkbox" id="undoStringOperations" checked>
                            <label for="undoStringOperations">Undo String Operations</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="simplifyProperties" checked>
                            <label for="simplifyProperties">Simplify Properties</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="renameHexIdentifiers" checked>
                            <label for="renameHexIdentifiers">Rename Hex Identifiers</label>
                        </div>
                    </div>
                </div>
                
                <div class="presets">
                    <div class="preset-btn" id="presetDefault">
                        <i class="fas fa-check-circle"></i> Default Preset
                    </div>
                    <div class="preset-btn" id="presetAggressive">
                        <i class="fas fa-bolt"></i> Aggressive Deobfuscation
                    </div>
                    <div class="preset-btn" id="presetMinimal">
                        <i class="fas fa-bars"></i> Minimal Transformation
                    </div>
                </div>
            </div>
            
            <div class="disclaimer">
                <div class="disclaimer-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Important Legal Notice</h3>
                </div>
                <p>⚠️ This tool is for educational purposes only. The creator is NOT responsible for any misuse, copyright violation, or illegal redistribution of code. Always respect the terms of service and copyright laws of the resources you access.</p>
                <p>⚠️ Downloading and re-hosting arbitrary websites' code without permission can violate copyright laws.</p>
            </div>
            
            <div class="export-options">
                <label class="export-option active" id="combinedOption">
                    <input type="radio" name="exportType" value="combined" checked> 
                    <i class="fas fa-file-code"></i> Combined into one file
                </label>
                <label class="export-option" id="separateOption">
                    <input type="radio" name="exportType" value="separate"> 
                    <i class="fas fa-folder-open"></i> Separate files
                </label>
            </div>
            
            <div class="button-group">
                <button id="clearBtn" class="btn btn-secondary">
                    <i class="fas fa-eraser"></i> Clear All
                </button>
                <button id="exampleBtn" class="btn btn-secondary">
                    <i class="fas fa-lightbulb"></i> Load Example
                </button>
                <button id="githubExampleBtn" class="btn btn-secondary">
                    <i class="fab fa-github"></i> GitHub Example
                </button>
                <button id="viewBtn" class="btn btn-primary">
                    <i class="fas fa-eye"></i> View as index.html
                </button>
                <button id="exportBtn" class="btn btn-primary">
                    <i class="fas fa-file-export"></i> Export to index.html
                </button>
            </div>
        </div>
        
        <div id="statusMessage"></div>
        
        <div class="card">
            <div class="card-title">
                <i class="fas fa-file-code"></i>
                <h2>Code Viewer</h2>
            </div>
            
            <div id="outputHeader" style="display: none;">
                <div class="file-info">
                    <i class="fas fa-info-circle"></i> 
                    Showing: <span id="fileName">file.js</span> | 
                    Size: <span id="fileSize">0 KB</span> | 
                    Lines: <span id="lineCount">0</span> |
                    Type: <span id="fileType">JavaScript</span>
                </div>
                <div class="button-group">
                    <button id="prevBtn" class="btn btn-secondary btn-small" disabled>
                        <i class="fas fa-chevron-left"></i> Prev
                    </button>
                    <button id="nextBtn" class="btn btn-secondary btn-small" disabled>
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                    <button id="copyBtn" class="btn btn-primary btn-small">
                        <i class="far fa-copy"></i> Copy
                    </button>
                    <button id="deobfuscateBtn" class="btn btn-secondary btn-small">
                        <i class="fas fa-magic"></i> Deobfuscate
                    </button>
                </div>
            </div>
            
            <div id="output">
                <div class="output-placeholder">
                    <i class="fas fa-code fa-3x"></i>
                    <p>Enter a URL and click "Explore Source" to begin</p>
                </div>
            </div>
            
            <div class="file-navigation">
                <button id="firstBtn" class="btn btn-secondary btn-small" disabled>
                    <i class="fas fa-step-backward"></i> First
                </button>
                <button id="prevBtn2" class="btn btn-secondary btn-small" disabled>
                    <i class="fas fa-chevron-left"></i> Prev
                </button>
                <div class="file-count">
                    File: <span id="currentFile">0</span> of <span id="totalFiles">0</span>
                </div>
                <button id="nextBtn2" class="btn btn-secondary btn-small" disabled>
                    Next <i class="fas fa-chevron-right"></i>
                </button>
                <button id="lastBtn" class="btn btn-secondary btn-small" disabled>
                    Last <i class="fas fa-step-forward"></i>
                </button>
            </div>
        </div>
        
        <div class="status-bar">
            <div id="statusText">Ready to explore source code</div>
            <div>CodeMaster Pro v4.0 | Enhanced Limits: 256 files, 30 folders</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM elements
            const urlInput = document.getElementById('urlInput');
            const fetchBtn = document.getElementById('fetchBtn');
            const clearBtn = document.getElementById('clearBtn');
            const copyBtn = document.getElementById('copyBtn');
            const deobfuscateBtn = document.getElementById('deobfuscateBtn');
            const exportBtn = document.getElementById('exportBtn');
            const viewBtn = document.getElementById('viewBtn');
            const exampleBtn = document.getElementById('exampleBtn');
            const githubExampleBtn = document.getElementById('githubExampleBtn');
            const output = document.getElementById('output');
            const spinner = document.getElementById('spinner');
            const statusMessage = document.getElementById('statusMessage');
            const statusText = document.getElementById('statusText');
            const outputHeader = document.getElementById('outputHeader');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            const lineCount = document.getElementById('lineCount');
            const fileType = document.getElementById('fileType');
            const githubOptions = document.getElementById('githubOptions');
            const fileStructure = document.getElementById('fileStructure');
            const fileList = document.getElementById('fileList');
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const branchInput = document.getElementById('branchInput');
            const maxFilesInput = document.getElementById('maxFiles');
            const maxFoldersInput = document.getElementById('maxFolders');
            const grabSourceCode = document.getElementById('grabSourceCode');
            const grabResources = document.getElementById('grabResources');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const prevBtn2 = document.getElementById('prevBtn2');
            const nextBtn2 = document.getElementById('nextBtn2');
            const firstBtn = document.getElementById('firstBtn');
            const lastBtn = document.getElementById('lastBtn');
            const currentFileSpan = document.getElementById('currentFile');
            const totalFilesSpan = document.getElementById('totalFiles');
            const combinedOption = document.getElementById('combinedOption');
            const separateOption = document.getElementById('separateOption');
            
            // Deobfuscation settings
            const unpackArrays = document.getElementById('unpackArrays');
            const removeUnpackedArrays = document.getElementById('removeUnpackedArrays');
            const replaceProxyFunctions = document.getElementById('replaceProxyFunctions');
            const removeProxyFunctions = document.getElementById('removeProxyFunctions');
            const simplifyExpressions = document.getElementById('simplifyExpressions');
            const removeDeadBranches = document.getElementById('removeDeadBranches');
            const undoStringOperations = document.getElementById('undoStringOperations');
            const simplifyProperties = document.getElementById('simplifyProperties');
            const renameHexIdentifiers = document.getElementById('renameHexIdentifiers');
            const presetDefault = document.getElementById('presetDefault');
            const presetAggressive = document.getElementById('presetAggressive');
            const presetMinimal = document.getElementById('presetMinimal');
            
            // State management
            let fetchedContent = '';
            let currentUrl = '';
            let isGitHubRepo = false;
            let allFiles = [];
            let currentFileIndex = 0;
            let compiledHTML = '';
            let websiteResources = [];
            let exportType = 'combined'; // 'combined' or 'separate'
            
            // Event listeners
            fetchBtn.addEventListener('click', fetchCode);
            clearBtn.addEventListener('click', clearAll);
            copyBtn.addEventListener('click', copyToClipboard);
            deobfuscateBtn.addEventListener('click', deobfuscateCode);
            exportBtn.addEventListener('click', exportToHTML);
            viewBtn.addEventListener('click', viewAsHTML);
            exampleBtn.addEventListener('click', loadExample);
            githubExampleBtn.addEventListener('click', loadGitHubExample);
            presetDefault.addEventListener('click', () => applyPreset('default'));
            presetAggressive.addEventListener('click', () => applyPreset('aggressive'));
            presetMinimal.addEventListener('click', () => applyPreset('minimal'));
            prevBtn.addEventListener('click', () => navigateFiles(-1));
            nextBtn.addEventListener('click', () => navigateFiles(1));
            prevBtn2.addEventListener('click', () => navigateFiles(-1));
            nextBtn2.addEventListener('click', () => navigateFiles(1));
            firstBtn.addEventListener('click', () => navigateToFile(0));
            lastBtn.addEventListener('click', () => navigateToFile(allFiles.length - 1));
            urlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') fetchCode();
            });
            
            // Export type selection
            combinedOption.addEventListener('click', () => {
                exportType = 'combined';
                combinedOption.classList.add('active');
                separateOption.classList.remove('active');
            });
            
            separateOption.addEventListener('click', () => {
                exportType = 'separate';
                separateOption.classList.add('active');
                combinedOption.classList.remove('active');
            });
            
            // Apply deobfuscation presets
            function applyPreset(type) {
                switch(type) {
                    case 'default':
                        unpackArrays.checked = true;
                        removeUnpackedArrays.checked = true;
                        replaceProxyFunctions.checked = true;
                        removeProxyFunctions.checked = true;
                        simplifyExpressions.checked = true;
                        removeDeadBranches.checked = true;
                        undoStringOperations.checked = true;
                        simplifyProperties.checked = true;
                        renameHexIdentifiers.checked = true;
                        showStatus('Default preset applied', 'success');
                        break;
                    case 'aggressive':
                        unpackArrays.checked = true;
                        removeUnpackedArrays.checked = true;
                        replaceProxyFunctions.checked = true;
                        removeProxyFunctions.checked = true;
                        simplifyExpressions.checked = true;
                        removeDeadBranches.checked = true;
                        undoStringOperations.checked = true;
                        simplifyProperties.checked = true;
                        renameHexIdentifiers.checked = true;
                        showStatus('Aggressive deobfuscation preset applied', 'success');
                        break;
                    case 'minimal':
                        unpackArrays.checked = false;
                        removeUnpackedArrays.checked = false;
                        replaceProxyFunctions.checked = true;
                        removeProxyFunctions.checked = false;
                        simplifyExpressions.checked = true;
                        removeDeadBranches.checked = false;
                        undoStringOperations.checked = false;
                        simplifyProperties.checked = false;
                        renameHexIdentifiers.checked = false;
                        showStatus('Minimal transformation preset applied', 'success');
                        break;
                }
            }
            
            // Load example website
            function loadExample() {
                urlInput.value = 'https://example.com';
                githubOptions.style.display = 'none';
                fetchCode();
            }
            
            // Load GitHub example
            function loadGitHubExample() {
                urlInput.value = 'https://github.com/axios/axios';
                githubOptions.style.display = 'flex';
                fetchCode();
            }
            
            // Clear all inputs and outputs
            function clearAll() {
                urlInput.value = '';
                output.textContent = '';
                output.innerHTML = '<div class="output-placeholder"><i class="fas fa-code fa-3x"></i><p>Enter a URL and click "Explore Source" to begin</p></div>';
                outputHeader.style.display = 'none';
                statusMessage.innerHTML = '';
                statusText.textContent = 'Ready to explore source code';
                githubOptions.style.display = 'none';
                fileStructure.style.display = 'none';
                progressContainer.style.display = 'none';
                isGitHubRepo = false;
                allFiles = [];
                compiledHTML = '';
                websiteResources = [];
                updateNavigationButtons();
            }
            
            // Copy to clipboard
            function copyToClipboard() {
                if (!fetchedContent) return;
                
                navigator.clipboard.writeText(fetchedContent).then(() => {
                    showStatus('Code copied to clipboard!', 'success');
                }).catch(err => {
                    showStatus('Failed to copy: ' + err, 'error');
                });
            }
            
            // Show status message
            function showStatus(message, type) {
                statusMessage.innerHTML = `<div class="${type}">${message}</div>`;
                setTimeout(() => {
                    statusMessage.innerHTML = '';
                }, 5000);
            }
            
            // Validate URL
            function isValidUrl(url) {
                try {
                    new URL(url);
                    return true;
                } catch (e) {
                    return false;
                }
            }
            
            // Get file extension
            function getFileExtension(filename) {
                return filename.split('.').pop().toLowerCase();
            }
            
            // Get file type
            function getFileType(extension) {
                const types = {
                    'js': 'JavaScript',
                    'html': 'HTML',
                    'css': 'CSS',
                    'json': 'JSON',
                    'md': 'Markdown',
                    'txt': 'Text',
                    'py': 'Python',
                    'java': 'Java',
                    'php': 'PHP',
                    'ts': 'TypeScript'
                };
                return types[extension] || 'Code';
            }
            
            // Get file icon class
            function getFileIconClass(extension) {
                return extension === 'js' ? 'js' : 
                       extension === 'css' ? 'css' : 
                       extension === 'html' ? 'html' : 
                       extension === 'json' ? 'json' : 'file';
            }
            
            // Apply syntax highlighting
            function applySyntaxHighlighting(content, extension) {
                // In a real application, use a library like Prism.js for better highlighting
                // This is a simplified version for demonstration
                
                let highlighted = content;
                
                // JavaScript highlighting
                if (extension === 'js') {
                    highlighted = highlighted
                        .replace(/(\/\/.*)/g, '<span class="comment">$1</span>')
                        .replace(/\b(function|var|let|const|if|else|for|while|return|class|export|import|from|this)\b/g, '<span class="keyword">$1</span>')
                        .replace(/\b(true|false|null|undefined)\b/g, '<span class="constant">$1</span>')
                        .replace(/\b(\d+\.?\d*)\b/g, '<span class="number">$1</span>')
                        .replace(/(["'`])(?:(?=(\\?))\2.)*?\1/g, '<span class="string">$&</span>');
                }
                
                // HTML highlighting
                if (extension === 'html') {
                    highlighted = highlighted
                        .replace(/&lt;!--[\s\S]*?--&gt;/g, '<span class="comment">$&</span>')
                        .replace(/&lt;([\w\-:]+)/g, '&lt;<span class="keyword">$1</span>')
                        .replace(/&lt;\/[\w\-:]+&gt;/g, '&lt;/<span class="keyword">$1</span>')
                        .replace(/(\w+)=("|')(.*?)\2/g, '<span class="constant">$1</span>=$2$3$2')
                        .replace(/&lt;!DOCTYPE\s+html&gt;/gi, '<span class="doctype">$&</span>');
                }
                
                // CSS highlighting
                if (extension === 'css') {
                    highlighted = highlighted
                        .replace(/(\/\*[\s\S]*?\*\/)/g, '<span class="comment">$1</span>')
                        .replace(/([\w-]+)\s*:/g, '<span class="constant">$1</span>:')
                        .replace(/#([a-f0-9]{3,6})\b/gi, '<span class="string">#$1</span>')
                        .replace(/(\d+\.?\d*)(px|em|rem|%|s)/g, '<span class="number">$1$2</span>');
                }
                
                return highlighted;
            }
            
            // Fetch code from URL
            async function fetchCode() {
                const url = urlInput.value.trim();
                
                if (!url) {
                    showStatus('Please enter a URL', 'error');
                    return;
                }
                
                if (!isValidUrl(url)) {
                    showStatus('Invalid URL format', 'error');
                    return;
                }
                
                // Reset state
                clearFileStructure();
                outputHeader.style.display = 'none';
                progressContainer.style.display = 'none';
                websiteResources = [];
                
                // Get configuration values
                const maxFiles = parseInt(maxFilesInput.value) || 256;
                const maxFolders = parseInt(maxFoldersInput.value) || 15;
                
                if (maxFiles < 1 || maxFiles > 256) {
                    showStatus('Max files must be between 1 and 256', 'error');
                    return;
                }
                
                if (maxFolders < 1 || maxFolders > 30) {
                    showStatus('Max folders must be between 1 and 30', 'error');
                    return;
                }
                
                // Check if it's a GitHub repo URL
                isGitHubRepo = url.includes('github.com') && 
                              !url.includes('raw.githubusercontent.com') && 
                              url.split('/').length >= 5;
                
                if (isGitHubRepo) {
                    githubOptions.style.display = 'flex';
                    await processGitHubRepo(url, maxFiles, maxFolders);
                } else {
                    githubOptions.style.display = 'none';
                    await processWebsite(url);
                }
            }
            
            // Process website
            async function processWebsite(url) {
                // Show loading state
                spinner.style.display = 'inline-block';
                fetchBtn.disabled = true;
                statusText.textContent = 'Fetching website content...';
                currentUrl = url;
                fetchedContent = '';
                
                try {
                    const response = await fetch(url);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    
                    const content = await response.text();
                    fetchedContent = content;
                    
                    // Store main HTML as a resource
                    websiteResources.push({
                        path: 'index.html',
                        content: content,
                        size: content.length,
                        type: 'html'
                    });
                    
                    // If grab source code is enabled, process resources
                    if (grabSourceCode.checked) {
                        await processWebsiteResources(url, content);
                    }
                    
                    // Set allFiles to websiteResources for navigation
                    allFiles = websiteResources;
                    totalFilesSpan.textContent = allFiles.length;
                    
                    // Display file info
                    displayFile(0);
                    statusText.textContent = 'Website content fetched successfully!';
                    
                } catch (error) {
                    console.error('Fetch error:', error);
                    showStatus(`Error fetching content: ${error.message}`, 'error');
                    statusText.textContent = 'Failed to fetch content';
                    output.innerHTML = `<div class="error">Error: ${error.message}</div>`;
                } finally {
                    spinner.style.display = 'none';
                    fetchBtn.disabled = false;
                }
            }
            
            // Process website resources
            async function processWebsiteResources(url, htmlContent) {
                try {
                    // Create a temporary DOM parser to extract resources
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(htmlContent, 'text/html');
                    
                    // Find all resources
                    const resources = [
                        ...doc.querySelectorAll('link[rel="stylesheet"]'),
                        ...doc.querySelectorAll('script[src]'),
                        ...doc.querySelectorAll('img[src]')
                    ];
                    
                    statusText.textContent = `Found ${resources.length} resources to process...`;
                    
                    // Process each resource
                    for (const resource of resources) {
                        const resourceUrl = new URL(resource.src || resource.href, url).href;
                        
                        try {
                            const resourceResponse = await fetch(resourceUrl);
                            if (!resourceResponse.ok) continue;
                            
                            const resourceContent = await resourceResponse.text();
                            const resourceName = resourceUrl.split('/').pop() || 'resource';
                            const extension = getFileExtension(resourceName);
                            
                            // Store resource
                            websiteResources.push({
                                path: resourceName,
                                content: resourceContent,
                                size: resourceContent.length,
                                type: extension
                            });
                            
                            showStatus(`Fetched resource: ${resourceName}`, 'success');
                            
                        } catch (error) {
                            console.error(`Error fetching resource: ${resourceUrl}`, error);
                        }
                    }
                    
                    statusText.textContent = `Processed ${websiteResources.length} resources`;
                    
                } catch (error) {
                    console.error('Resource processing error:', error);
                    showStatus(`Error processing resources: ${error.message}`, 'error');
                }
            }
            
            // Process GitHub repository
            async function processGitHubRepo(url, maxFiles, maxFolders) {
                try {
                    // Extract owner and repo from URL
                    const parts = url.split('/');
                    const owner = parts[3];
                    const repo = parts[4];
                    const branch = branchInput.value || 'main';
                    
                    spinner.style.display = 'inline-block';
                    fetchBtn.disabled = true;
                    statusText.textContent = 'Fetching GitHub repository structure...';
                    
                    // Get repository tree
                    const treeUrl = `https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`;
                    const response = await fetch(treeUrl);
                    
                    if (!response.ok) {
                        throw new Error(`GitHub API error: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    // Filter files (only code files) with folder depth limit
                    allFiles = data.tree
                        .filter(item => item.type === 'blob' && 
                               ['js', 'html', 'css', 'json', 'md', 'txt'].includes(getFileExtension(item.path)))
                        .filter(item => item.path.split('/').length <= maxFolders)
                        .slice(0, maxFiles);
                    
                    if (allFiles.length === 0) {
                        throw new Error('No code files found in repository');
                    }
                    
                    // Show file structure
                    displayFileStructure(allFiles);
                    fileStructure.style.display = 'block';
                    
                    // Start processing files
                    currentFileIndex = 0;
                    progressContainer.style.display = 'block';
                    progressBar.style.width = '0%';
                    progressText.textContent = `0/${allFiles.length}`;
                    totalFilesSpan.textContent = allFiles.length;
                    
                    // Process first file
                    processNextGitHubFile();
                } catch (error) {
                    console.error('GitHub error:', error);
                    showStatus(`Error processing repository: ${error.message}`, 'error');
                    statusText.textContent = 'Failed to fetch repository';
                    output.innerHTML = `<div class="error">Error: ${error.message}</div>`;
                    spinner.style.display = 'none';
                    fetchBtn.disabled = false;
                }
            }
            
            // Process next GitHub file
            async function processNextGitHubFile() {
                if (currentFileIndex >= allFiles.length) {
                    // All files processed
                    spinner.style.display = 'none';
                    fetchBtn.disabled = false;
                    statusText.textContent = 'Repository processing completed!';
                    displayFile(0);
                    return;
                }
                
                const file = allFiles[currentFileIndex];
                const extension = getFileExtension(file.path);
                
                try {
                    // Update progress
                    progressBar.style.width = `${(currentFileIndex / allFiles.length) * 100}%`;
                    progressText.textContent = `${currentFileIndex + 1}/${allFiles.length}`;
                    statusText.textContent = `Processing file: ${file.path}`;
                    
                    // Fetch file content
                    const contentResponse = await fetch(file.url);
                    if (!contentResponse.ok) throw new Error('Failed to fetch file content');
                    
                    const contentData = await contentResponse.json();
                    const content = atob(contentData.content); // Decode base64
                    
                    // Store file content
                    file.content = content;
                    
                    // If this is the first file, display it
                    if (currentFileIndex === 0) {
                        displayFile(0);
                    }
                    
                    // Move to next file
                    currentFileIndex++;
                    processNextGitHubFile();
                    
                } catch (error) {
                    console.error('File processing error:', error);
                    showStatus(`Error processing file: ${error.message}`, 'error');
                    // Move to next file even if error
                    currentFileIndex++;
                    processNextGitHubFile();
                }
            }
            
            // Display file structure
            function displayFileStructure(files) {
                fileList.innerHTML = '';
                files.forEach(file => {
                    const extension = getFileExtension(file.path);
                    const iconClass = getFileIconClass(extension);
                    
                    const fileElement = document.createElement('div');
                    fileElement.className = `file-item ${iconClass}`;
                    fileElement.innerHTML = `
                        <i class="fas fa-file${iconClass === 'js' ? '-code' : (iconClass === 'html' ? '-code' : '')}"></i>
                        <span>${file.path}</span>
                        <span class="badge badge-success">${extension.toUpperCase()}</span>
                    `;
                    fileList.appendChild(fileElement);
                });
            }
            
            // Clear file structure
            function clearFileStructure() {
                fileList.innerHTML = '';
                fileStructure.style.display = 'none';
            }
            
            // Navigate between files
            function navigateFiles(direction) {
                const newIndex = currentFileIndex + direction;
                if (newIndex >= 0 && newIndex < allFiles.length) {
                    navigateToFile(newIndex);
                }
            }
            
            // Navigate to specific file
            function navigateToFile(index) {
                if (index >= 0 && index < allFiles.length) {
                    currentFileIndex = index;
                    displayFile(index);
                }
            }
            
            // Display file at index
            function displayFile(index) {
                if (index < 0 || index >= allFiles.length) return;
                
                const file = allFiles[index];
                const content = file.content;
                const extension = getFileExtension(file.path);
                const size = (content.length / 1024).toFixed(2);
                const lines = content.split('\n').length;
                
                fileName.textContent = file.path;
                fileSize.textContent = `${size} KB`;
                lineCount.textContent = lines;
                fileType.textContent = getFileType(extension);
                outputHeader.style.display = 'flex';
                
                // Display content
                output.textContent = content;
                
                // Update navigation info
                currentFileSpan.textContent = index + 1;
                updateNavigationButtons();
            }
            
            // Update navigation buttons state
            function updateNavigationButtons() {
                prevBtn.disabled = currentFileIndex <= 0;
                nextBtn.disabled = currentFileIndex >= allFiles.length - 1;
                prevBtn2.disabled = currentFileIndex <= 0;
                nextBtn2.disabled = currentFileIndex >= allFiles.length - 1;
                firstBtn.disabled = currentFileIndex <= 0;
                lastBtn.disabled = currentFileIndex >= allFiles.length - 1;
            }
            
            // Deobfuscate code
            function deobfuscateCode() {
                if (!fetchedContent) return;
                
                try {
                    // Show loading
                    spinner.style.display = 'inline-block';
                    deobfuscateBtn.disabled = true;
                    statusText.textContent = 'Deobfuscating code...';
                    
                    // Simulate deobfuscation process
                    setTimeout(() => {
                        // This is a simulation - in a real app, you would call an API
                        const originalContent = allFiles[currentFileIndex].content;
                        let deobfuscated = originalContent;
                        
                        // Apply transformations based on settings
                        if (unpackArrays.checked) {
                            deobfuscated = deobfuscated.replace(/\[.*?\]/g, '[...]');
                        }
                        
                        if (replaceProxyFunctions.checked) {
                            deobfuscated = deobfuscated.replace(/(function\s*\(\)\s*{.*?return\s*\w+;?\s*})/g, '() => { ... }');
                        }
                        
                        if (simplifyExpressions.checked) {
                            deobfuscated = deobfuscated.replace(/!!\w+/g, 'true');
                            deobfuscated = deobfuscated.replace(/!\w+/g, 'false');
                        }
                        
                        if (undoStringOperations.checked) {
                            deobfuscated = deobfuscated.replace(/\b\w+\s*\.\s*split\s*\(\s*('|").*?\1\s*\)/g, '[...]');
                        }
                        
                        if (renameHexIdentifiers.checked) {
                            deobfuscated = deobfuscated.replace(/0x[\da-fA-F]+/g, hex => {
                                const decimal = parseInt(hex, 16);
                                return decimal > 10000 ? decimal : hex;
                            });
                        }
                        
                        // Update content
                        allFiles[currentFileIndex].content = deobfuscated;
                        output.textContent = deobfuscated;
                        
                        // Update status
                        spinner.style.display = 'none';
                        deobfuscateBtn.disabled = false;
                        showStatus('Code deobfuscated successfully!', 'success');
                        statusText.textContent = 'Deobfuscation complete';
                        
                    }, 1500);
                    
                } catch (error) {
                    console.error('Deobfuscation error:', error);
                    showStatus(`Error deobfuscating code: ${error.message}`, 'error');
                    spinner.style.display = 'none';
                    deobfuscateBtn.disabled = false;
                }
            }
            
            // View as HTML
            function viewAsHTML() {
                try {
                    // Show loading
                    spinner.style.display = 'inline-block';
                    viewBtn.disabled = true;
                    statusText.textContent = 'Compiling to index.html...';
                    
                    setTimeout(() => {
                        let htmlContent = '';
                        
                        if (isGitHubRepo) {
                            // Generate HTML for GitHub repository
                            htmlContent = generateGitHubExportHTML();
                        } else {
                            // Generate HTML for website
                            htmlContent = generateWebsiteExportHTML();
                        }
                        
                        // Display the compiled HTML in the output
                        output.textContent = htmlContent;
                        outputHeader.style.display = 'none';
                        
                        // Update status
                        spinner.style.display = 'none';
                        viewBtn.disabled = false;
                        showStatus('Compiled HTML ready for viewing', 'success');
                        statusText.textContent = 'View compilation complete';
                        
                    }, 1000);
                    
                } catch (error) {
                    console.error('View error:', error);
                    showStatus(`Error viewing compiled HTML: ${error.message}`, 'error');
                    spinner.style.display = 'none';
                    viewBtn.disabled = false;
                }
            }
            
            // Export to HTML
            function exportToHTML() {
                try {
                    // Show loading
                    spinner.style.display = 'inline-block';
                    exportBtn.disabled = true;
                    statusText.textContent = 'Compiling to index.html...';
                    
                    setTimeout(() => {
                        let htmlContent = '';
                        
                        if (isGitHubRepo) {
                            // Generate HTML for GitHub repository
                            htmlContent = generateGitHubExportHTML();
                        } else {
                            // Generate HTML for website
                            htmlContent = generateWebsiteExportHTML();
                        }
                        
                        // Create filename
                        const filename = isGitHubRepo ? 
                            `github-${allFiles[0].path.split('/')[0]}-export.html` : 
                            `website-${new URL(currentUrl).hostname}.html`;
                        
                        // Create and trigger download
                        const blob = new Blob([htmlContent], { type: 'text/html' });
                        const downloadUrl = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        
                        a.href = downloadUrl;
                        a.download = filename;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(downloadUrl);
                        
                        // Also copy to clipboard for convenience
                        navigator.clipboard.writeText(htmlContent).then(() => {
                            showStatus('Compiled HTML copied to clipboard!', 'success');
                        });
                        
                        // Update status
                        spinner.style.display = 'none';
                        exportBtn.disabled = false;
                        showStatus(`Exported to ${filename}`, 'success');
                        statusText.textContent = 'Export completed';
                        
                    }, 1000);
                    
                } catch (error) {
                    console.error('Export error:', error);
                    showStatus(`Error exporting file: ${error.message}`, 'error');
                    spinner.style.display = 'none';
                    exportBtn.disabled = false;
                }
            }
            
            // Generate HTML for GitHub export
            function generateGitHubExportHTML() {
                if (exportType === 'separate') {
                    return generateSeparateFilesHTML();
                }
                
                let html = `
                    <!DOCTYPE html>
                    <html lang="en">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>GitHub Repository Export</title>
                        <style>
                            body {
                                font-family: 'Segoe UI', system-ui, sans-serif;
                                background: #0d1117;
                                color: #c9d1d9;
                                line-height: 1.6;
                                padding: 2rem;
                                max-width: 1200px;
                                margin: 0 auto;
                            }
                            header {
                                text-align: center;
                                padding: 2rem 0;
                                margin-bottom: 2rem;
                                border-bottom: 1px solid #30363d;
                            }
                            h1 {
                                font-size: 2.5rem;
                                margin-bottom: 0.5rem;
                                background: linear-gradient(90deg, #2ea043 0%, #3fb950 100%);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                            }
                            .file-list {
                                margin-bottom: 2rem;
                            }
                            .file-item {
                                background: #161b22;
                                border: 1px solid #30363d;
                                border-radius: 6px;
                                padding: 1rem;
                                margin-bottom: 1rem;
                            }
                            .file-header {
                                display: flex;
                                align-items: center;
                                gap: 0.5rem;
                                margin-bottom: 0.5rem;
                                padding-bottom: 0.5rem;
                                border-bottom: 1px solid #30363d;
                            }
                            .file-content {
                                background: #010409;
                                border: 1px solid #30363d;
                                border-radius: 6px;
                                padding: 1rem;
                                overflow: auto;
                            }
                            pre {
                                white-space: pre-wrap;
                                font-family: 'Fira Code', 'Consolas', monospace;
                                font-size: 1rem;
                                line-height: 1.7;
                            }
                            .stats {
                                display: flex;
                                gap: 1rem;
                                margin-bottom: 1.5rem;
                                flex-wrap: wrap;
                            }
                            .stat-card {
                                background: #161b22;
                                border: 1px solid #30363d;
                                border-radius: 8px;
                                padding: 1rem;
                                flex: 1;
                                min-width: 200px;
                                text-align: center;
                            }
                        </style>
                    </head>
                    <body>
                        <header>
                            <h1>GitHub Repository Export</h1>
                            <p>Source: ${currentUrl}</p>
                            <p>Generated: ${new Date().toLocaleString()}</p>
                        </header>
                        
                        <div class="stats">
                            <div class="stat-card">
                                <h3><i class="fas fa-folder"></i> Folders</h3>
                                <p>${calculateFolderCount(allFiles)}</p>
                            </div>
                            <div class="stat-card">
                                <h3><i class="fas fa-file"></i> Files</h3>
                                <p>${allFiles.length}</p>
                            </div>
                            <div class="stat-card">
                                <h3><i class="fas fa-code"></i> Lines of Code</h3>
                                <p>${calculateTotalLines(allFiles)}</p>
                            </div>
                        </div>
                        
                        <div class="file-list">
                `;
                
                allFiles.forEach(file => {
                    const extension = getFileExtension(file.path);
                    
                    html += `
                        <div class="file-item">
                            <div class="file-header">
                                <i class="fas fa-file-${extension === 'js' ? 'code' : (extension === 'html' ? 'code' : '')}"></i>
                                <h2>${file.path}</h2>
                                <span class="badge">${extension.toUpperCase()}</span>
                            </div>
                            <div class="file-content">
                                <pre>${escapeHTML(file.content)}</pre>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                        <footer style="margin-top: 3rem; text-align: center; color: #8b949e; font-size: 0.9rem;">
                            <p>This file was generated for educational purposes only. Always respect copyright laws.</p>
                        </footer>
                    </body>
                    </html>
                `;
                
                return html;
            }
            
            // Generate HTML for separate files export
            function generateSeparateFilesHTML() {
                let html = `
                    <!DOCTYPE html>
                    <html lang="en">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>GitHub Repository Export</title>
                        <style>
                            body {
                                font-family: 'Segoe UI', system-ui, sans-serif;
                                background: #0d1117;
                                color: #c9d1d9;
                                line-height: 1.6;
                                padding: 2rem;
                                max-width: 1200px;
                                margin: 0 auto;
                            }
                            header {
                                text-align: center;
                                padding: 2rem 0;
                                margin-bottom: 2rem;
                                border-bottom: 1px solid #30363d;
                            }
                            h1 {
                                font-size: 2.5rem;
                                margin-bottom: 0.5rem;
                                background: linear-gradient(90deg, #2ea043 0%, #3fb950 100%);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                            }
                            .file-list {
                                margin-bottom: 2rem;
                            }
                            .file-item {
                                background: #161b22;
                                border: 1px solid #30363d;
                                border-radius: 6px;
                                padding: 1rem;
                                margin-bottom: 1rem;
                            }
                            .file-header {
                                display: flex;
                                align-items: center;
                                gap: 0.5rem;
                                margin-bottom: 0.5rem;
                                padding-bottom: 0.5rem;
                                border-bottom: 1px solid #30363d;
                            }
                            .file-content {
                                background: #010409;
                                border: 1px solid #30363d;
                                border-radius: 6px;
                                padding: 1rem;
                                overflow: auto;
                            }
                            pre {
                                white-space: pre-wrap;
                                font-family: 'Fira Code', 'Consolas', monospace;
                                font-size: 1rem;
                                line-height: 1.7;
                            }
                            .stats {
                                display: flex;
                                gap: 1rem;
                                margin-bottom: 1.5rem;
                                flex-wrap: wrap;
                            }
                            .stat-card {
                                background: #161b22;
                                border: 1px solid #30363d;
                                border-radius: 8px;
                                padding: 1rem;
                                flex: 1;
                                min-width: 200px;
                                text-align: center;
                            }
                        </style>
                    </head>
                    <body>
                        <header>
                            <h1>GitHub Repository Export</h1>
                            <p>Source: ${currentUrl}</p>
                            <p>Generated: ${new Date().toLocaleString()}</p>
                        </header>
                        
                        <div class="stats">
                            <div class="stat-card">
                                <h3><i class="fas fa-folder"></i> Folders</h3>
                                <p>${calculateFolderCount(allFiles)}</p>
                            </div>
                            <div class="stat-card">
                                <h3><i class="fas fa-file"></i> Files</h3>
                                <p>${allFiles.length}</p>
                            </div>
                            <div class="stat-card">
                                <h3><i class="fas fa-code"></i> Lines of Code</h3>
                                <p>${calculateTotalLines(allFiles)}</p>
                            </div>
                        </div>
                        
                        <div class="file-list">
                `;
                
                allFiles.forEach(file => {
                    const extension = getFileExtension(file.path);
                    
                    html += `
                        <div class="file-item">
                            <div class="file-header">
                                <i class="fas fa-file-${extension === 'js' ? 'code' : (extension === 'html' ? 'code' : '')}"></i>
                                <h2>${file.path}</h2>
                                <span class="badge">${extension.toUpperCase()}</span>
                            </div>
                            <div class="file-content">
                                <pre>${escapeHTML(file.content)}</pre>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                        <footer style="margin-top: 3rem; text-align: center; color: #8b949e; font-size: 0.9rem;">
                            <p>This file was generated for educational purposes only. Always respect copyright laws.</p>
                        </footer>
                    </body>
                    </html>
                `;
                
                return html;
            }
            
            // Calculate folder count
            function calculateFolderCount(files) {
                const folderSet = new Set();
                files.forEach(file => {
                    const pathParts = file.path.split('/');
                    if (pathParts.length > 1) {
                        // Add all parent folders
                        let currentPath = '';
                        for (let i = 0; i < pathParts.length - 1; i++) {
                            currentPath += (currentPath ? '/' : '') + pathParts[i];
                            folderSet.add(currentPath);
                        }
                    }
                });
                return folderSet.size;
            }
            
            // Calculate total lines
            function calculateTotalLines(files) {
                return files.reduce((total, file) => {
                    return total + (file.content ? file.content.split('\n').length : 0);
                }, 0);
            }
            
            // Generate HTML for website export
            function generateWebsiteExportHTML() {
                if (exportType === 'separate') {
                    return generateSeparateWebsiteFilesHTML();
                }
                
                let html = `
                    <!DOCTYPE html>
                    <html lang="en">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>Website Source Export</title>
                        <style>
                            body {
                                font-family: 'Segoe UI', system-ui, sans-serif;
                                background: #0d1117;
                                color: #c9d1d9;
                                line-height: 1.6;
                                padding: 2rem;
                                max-width: 1200px;
                                margin: 0 auto;
                            }
                            header {
                                text-align: center;
                                padding: 2rem 0;
                                margin-bottom: 2rem;
                                border-bottom: 1px solid #30363d;
                            }
                            h1 {
                                font-size: 2.5rem;
                                margin-bottom: 0.5rem;
                                background: linear-gradient(90deg, #2ea043 0%, #3fb950 100%);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                            }
                            .resource-list {
                                margin-bottom: 2rem;
                            }
                            .resource-item {
                                background: #161b22;
                                border: 1px solid #30363d;
                                border-radius: 6px;
                                padding: 1rem;
                                margin-bottom: 1rem;
                            }
                            .resource-header {
                                display: flex;
                                align-items: center;
                                gap: 0.5rem;
                                margin-bottom: 0.5rem;
                                padding-bottom: 0.5rem;
                                border-bottom: 1px solid #30363d;
                            }
                            .resource-content {
                                background: #010409;
                                border: 1px solid #30363d;
                                border-radius: 6px;
                                padding: 1rem;
                                overflow: auto;
                            }
                            pre {
                                white-space: pre-wrap;
                                font-family: 'Fira Code', 'Consolas', monospace;
                                font-size: 1rem;
                                line-height: 1.7;
                            }
                            .stats {
                                display: flex;
                                gap: 1rem;
                                margin-bottom: 1.5rem;
                                flex-wrap: wrap;
                            }
                            .stat-card {
                                background: #161b22;
                                border: 1px solid #30363d;
                                border-radius: 8px;
                                padding: 1rem;
                                flex: 1;
                                min-width: 200px;
                                text-align: center;
                            }
                        </style>
                    </head>
                    <body>
                        <header>
                            <h1>Website Source Export</h1>
                            <p>Source: ${currentUrl}</p>
                            <p>Generated: ${new Date().toLocaleString()}</p>
                        </header>
                        
                        <div class="stats">
                            <div class="stat-card">
                                <h3><i class="fas fa-file"></i> Files</h3>
                                <p>${websiteResources.length}</p>
                            </div>
                            <div class="stat-card">
                                <h3><i class="fas fa-code"></i> Lines of Code</h3>
                                <p>${calculateWebsiteTotalLines(websiteResources)}</p>
                            </div>
                            <div class="stat-card">
                                <h3><i class="fas fa-database"></i> Total Size</h3>
                                <p>${(websiteResources.reduce((sum, res) => sum + res.size, 0) / 1024).toFixed(2)} KB</p>
                            </div>
                        </div>
                        
                        <div class="resource-list">
                `;
                
                websiteResources.forEach(resource => {
                    html += `
                        <div class="resource-item">
                            <div class="resource-header">
                                <i class="fas fa-file-${resource.type === 'js' ? 'code' : (resource.type === 'css' ? 'code' : '')}"></i>
                                <h2>${resource.path}</h2>
                                <span class="badge">${resource.type.toUpperCase()}</span>
                            </div>
                            <div class="resource-content">
                                <pre>${escapeHTML(resource.content)}</pre>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                        <footer style="margin-top: 3rem; text-align: center; color: #8b949e; font-size: 0.9rem;">
                            <p>This file was generated for educational purposes only. Always respect copyright laws.</p>
                        </footer>
                    </body>
                    </html>
                `;
                
                return html;
            }
            
            // Generate HTML for separate website files export
            function generateSeparateWebsiteFilesHTML() {
                let html = `
                    <!DOCTYPE html>
                    <html lang="en">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>Website Source Export</title>
                        <style>
                            body {
                                font-family: 'Segoe UI', system-ui, sans-serif;
                                background: #0d1117;
                                color: #c9d1d9;
                                line-height: 1.6;
                                padding: 2rem;
                                max-width: 1200px;
                                margin: 0 auto;
                            }
                            header {
                                text-align: center;
                                padding: 2rem 0;
                                margin-bottom: 2rem;
                                border-bottom: 1px solid #30363d;
                            }
                            h1 {
                                font-size: 2.5rem;
                                margin-bottom: 0.5rem;
                                background: linear-gradient(90deg, #2ea043 0%, #3fb950 100%);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                            }
                            .resource-list {
                                margin-bottom: 2rem;
                            }
                            .resource-item {
                                background: #161b22;
                                border: 1px solid #30363d;
                                border-radius: 6px;
                                padding: 1rem;
                                margin-bottom: 1rem;
                            }
                            .resource-header {
                                display: flex;
                                align-items: center;
                                gap: 0.5rem;
                                margin-bottom: 0.5rem;
                                padding-bottom: 0.5rem;
                                border-bottom: 1px solid #30363d;
                            }
                            .resource-content {
                                background: #010409;
                                border: 1px solid #30363d;
                                border-radius: 6px;
                                padding: 1rem;
                                overflow: auto;
                            }
                            pre {
                                white-space: pre-wrap;
                                font-family: 'Fira Code', 'Consolas', monospace;
                                font-size: 1rem;
                                line-height: 1.7;
                            }
                            .stats {
                                display: flex;
                                gap: 1rem;
                                margin-bottom: 1.5rem;
                                flex-wrap: wrap;
                            }
                            .stat-card {
                                background: #161b22;
                                border: 1px solid #30363d;
                                border-radius: 8px;
                                padding: 1rem;
                                flex: 1;
                                min-width: 200px;
                                text-align: center;
                            }
                        </style>
                    </head>
                    <body>
                        <header>
                            <h1>Website Source Export</h1>
                            <p>Source: ${currentUrl}</p>
                            <p>Generated: ${new Date().toLocaleString()}</p>
                        </header>
                        
                        <div class="stats">
                            <div class="stat-card">
                                <h3><i class="fas fa-file"></i> Files</h3>
                                <p>${websiteResources.length}</p>
                            </div>
                            <div class="stat-card">
                                <h3><i class="fas fa-code"></i> Lines of Code</h3>
                                <p>${calculateWebsiteTotalLines(websiteResources)}</p>
                            </div>
                            <div class="stat-card">
                                <h3><i class="fas fa-database"></i> Total Size</h3>
                                <p>${(websiteResources.reduce((sum, res) => sum + res.size, 0) / 1024).toFixed(2)} KB</p>
                            </div>
                        </div>
                        
                        <div class="resource-list">
                `;
                
                websiteResources.forEach(resource => {
                    html += `
                        <div class="resource-item">
                            <div class="resource-header">
                                <i class="fas fa-file-${resource.type === 'js' ? 'code' : (resource.type === 'css' ? 'code' : '')}"></i>
                                <h2>${resource.path}</h2>
                                <span class="badge">${resource.type.toUpperCase()}</span>
                            </div>
                            <div class="resource-content">
                                <pre>${escapeHTML(resource.content)}</pre>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                        <footer style="margin-top: 3rem; text-align: center; color: #8b949e; font-size: 0.9rem;">
                            <p>This file was generated for educational purposes only. Always respect copyright laws.</p>
                        </footer>
                    </body>
                    </html>
                `;
                
                return html;
            }
            
            // Calculate total lines for website resources
            function calculateWebsiteTotalLines(resources) {
                return resources.reduce((total, resource) => {
                    return total + (resource.content ? resource.content.split('\n').length : 0);
                }, 0);
            }
            
            // Escape HTML for safe output
            function escapeHTML(str) {
                return str.replace(/[&<>"']/g, 
                    tag => ({
                        '&': '&amp;',
                        '<': '&lt;',
                        '>': '&gt;',
                        '"': '&quot;',
                        "'": '&#39;'
                    }[tag]));
            }
        });
    </script>
</body>
</html>
